<?xml version="1.0" encoding="UTF-8"?>

<project name="DocNav" default="default" basedir=".">
    <description>Builds, tests, and runs the project DocumentNavigator.</description>
    <import file="nbproject/build-impl.xml"/>
    <import file="D:/Dropbox/projects.new/res/shared-build.xml"/>

    <!-- remove files genereted by antlr -->
    <target name="docnac.antlr.clean">
        <delete>
          <fileset dir="${basedir}/src/ca/sharcnet/nerve/docnav/generated/" includes="*.*"/>
        </delete>
    </target>

    <!-- generate files with antlr -->
    <target name="docname.antlr.gen">
        <echo message="Building ANTLR"/>
        <echo message="Root: ${basedir}"/>

        <java jar="D:/Dropbox/Projects/lib/jars/antlr-4.5.3-complete.jar" fork="false">
             <arg value="-o"/>
             <arg value="${basedir}/src/ca/sharcnet/nerve/docnav/generated/"/>
             <arg value="${basedir}/src/ca/sharcnet/nerve/docnav/antlr/EncodeLexer.g4"/>
        </java>
        <java jar="D:/Dropbox/Projects/lib/jars/antlr-4.5.3-complete.jar" fork="false">
             <arg value="-o"/>
             <arg value="${basedir}/src/ca/sharcnet/nerve/docnav/generated/"/>
             <arg value="${basedir}/src/ca/sharcnet/nerve/docnav/antlr/EncodeParser.g4"/>
        </java>
    </target>

    <target name="-post-jar">
        <antcall target="shared.package-to-store"/>
    </target>
</project>
